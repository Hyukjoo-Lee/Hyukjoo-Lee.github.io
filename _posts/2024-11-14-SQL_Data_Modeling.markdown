---
title: "{ SQL } 데이터 모델링 / SQL 기본"
date: 2024-11-14 03:00:00 KST
tags: [SQL]
---

## 데이터 모델링과 이해

#### 스키마 3단계

1. 외부스키마 - 사용자가 보는 관점에서 데이터베이스 스키마 정의 (사용자나 응용프로그램이 필요한 데이터 정의-View)
2. 개념스키마 - 사용자 관점의 데이터 스키마를 통합해서 데이터베이스의 전체적인 ‘논리적’ 구조를 정의
3. 내부스키마 - 데이터가 물리적으로 어떻게 저장되는지를 정의 - 물리적인 저장 구조 (컬럼정의,인덱스 등)

#### 엔터티 이름을 정할 때 유의사항

- 약어 사용은 자제한다.
- 현업에서 사용하는 이름으로 정한다.
- 사용되지 않는 고립 엔터티는 제거를 고려한다.

### 엔터티 특징

- 두 개 이상의 인스턴스의 집합이어야 한다.
- 두 개 이상의 속성을 갖는다.
- 하나의 속성은 한개의 속성만 갖는다.
- 하나의 엔터티의 인스턴스는 다른 엔터티의 인스턴스 관계인 Pairing을 갖는다.

#### 엔터티 관계 도출 시 고려사항

- 연관 규칙과 정보의 조합이 발생하는지
- 업무 기술서, 장표에 관계 연결에 대한 규칙이 있는지
- 업무 기술서, 장표에 관계 연결을 가능하게 하는 동사가 있는지

#### 분해 여부에 따른 속성

- 단일속성: 하나의 의미로 구성이 된 속성 (회원이름, 성별, 핸드폰 번호 등)
- 복합속성: 여러 의미로 구성되어 분해가 가능한 속성 (주소)
- 다중값 속성: 속성에 여러 개의 속성을 가질 수 있는 경우 (상품 리스트) => 엔터티로 분해 해야함

#### 주식별자 특징

- 최소성: 유일성을 만족하는 최소한의 속성의 수로 구성되어야 한다 (굳이 필요없는 속성 조합은 제외)
- 유일성: 주식별자로 인해 모든 인스턴스는 유일하게 구분되어야 한다 (이름 같은 중복이 가능한 속성은 주식별자가 될 수 없음)
- 불변성: 주식별자가 한번 특정 엔터티에 지정되면 그 식별자의 값은 변하면 안된다 (자주 변하지 않는 값이어야 한다)
- 존재성: 반드시 값이 존재해야 하며 NULL은 허용되지 않는다.

#### 관계(Relationship)

- 부모의 식별자를 자식에게 상속하여 상속된 속성을 매핑키로 사용하는 것을 뜻한다.
- 존재 관계: 한 엔터티의 존재가 다른 엔터티의 존재에 영향을 미치는 관계 (주문항목은 반드시 주문이 있어야 존재 가능)
- 행위 관계: 엔터티 간에 어떠한 행위가 있는 것 (고객 엔터티의 행동을 통해 주문 엔터티가 발생)
- ERD 에서는 존재관계와 행위 관계를 구분하지 않는다.

#### 함수 NULL 처리방식

- NULL만 존재하면 그대로 NULL을 리턴하는 집계 함수: SUM,AVG,MIN,MAX..
- NULL을 무시하는 함수: COUNT - NULL만 존재하면 0을 반환한다.

#### 데이터 무결성 종류

- 개체 무결성: 기본키를 구성하는 컬럼은 NULL 값이나 중복값을 가질 수 없다.
- 참조 무결성: 참조하는 외래키는 존재하지 않거나 NULL 일 수 없다.
- 도메인 무결성: 컬럼에 지정되는 값이 지정한 타입의 값이 아니거나 범위 밖일 수 없다. 즉, 정의된 도메인의 값이어야 한다.
- NULL 무결성: 특정 컬럼에 NULL을 허용하지 않는 특징
- 고유 무결성: 특정 속성에 대해 값이 중복되지 않는 특징
- 키 무결성: 하나의 릴레이션에는 적어도 하나의 키가 존재해야 함(반드시 하나의 조인키를 가져야함)

#### 용어

- 도메인: 속성이 허용되는 값들의 범위 또는 집합
- 튜플: 속성의 값(행)
- 릴레이션: 중복된 튜플을 가지지 않는 행과 열
- 키: 튜플을 고유하게 식별할 수 있는 속성

#### SQL 분류

- DDL: CREATE, ALTER, DROP, TRUNCATE
- DML: SELECT, UPDATE, DELETE, INSERT
- DCL: COMMIT, ROLLBACK
- TCL: GRANT, REVOKE

#### 별칭 정의할 때 주의할점

- 띄어쓰기나 특수기호 사용 시 쌍따옴표(" ") 필수

### 테이블 구조 변경

- 데이터 존재해도 컬럼 삭제가 가능
- 다중 컬럼 추가시 반드시 괄호로 묶어 전달
- 기본키 생성 시 기본기 컬럼에 인덱스가 자동 생성된다.
